# 测试计划（MVP）v1.0

## 1. 目标与范围
- 覆盖核心链路：热键 → 录音 → VAD → ASR（中间/最终） → LLM → 插入/撤销/降级。
- 兼容 15+ 典型输入环境；验证隐私开关与零外发。

## 2. 测试环境
- OS：Windows 10/11（x64）
- 音频：USB 耳麦（带降噪）
- 网络：良好/差网/离线
- 可配置第三方账号：Doubao ASR、OpenRouter

## 3. 用例概览
### 3.1 功能正确性
- F-001 Alt+S 启停录音；悬浮窗状态同步
- F-002 VAD 分段在短停顿（~800ms）与长停顿（>1.5s）准确
- F-003 ASR 中间结果滚动顺畅；最终结果稳定收敛
- F-004 LLM 输出遵循模板（主题/要点/行动项），无杜撰
- F-005 模式A 确认后插入；模式B 实时写入
- F-006 原子撤销恢复最近插入块，且不破坏目标应用撤销历史
- F-007 失焦时兜底剪贴板，并提示用户粘贴

### 3.2 性能与体验
- P-001 口述到字幕 < 400ms
- P-002 段末到结构化文本 < 800ms
- P-003 10 分钟连续口述：CPU < 15%，内存无异常增长

### 3.3 兼容性（示例 15 项）
- C-001 浏览器 input/textarea（Chrome/Edge）
- C-002 Gmail 富文本编辑器（网页）
- C-003 Notion 桌面
- C-004 Jira（网页）
- C-005 Slack 桌面
- C-006 飞书 PC
- C-007 微信 PC
- C-008 Word
- C-009 Outlook
- C-010 WPS
- C-011 OneNote
- C-012 记事本
- C-013 VSCode
- C-014 Confluence（网页）
- C-015 GitHub Issues（网页）

### 3.4 异常与降级
- E-001 ASR 429/限流：退避重试，≤3 次后提示并继续收音
- E-002 ASR 断线：自动重连，保留 ≤3s 片段
- E-003 LLM 429/超时：切换备用模型；连续失败 → 固定模板直出
- E-004 离线：仅本地模式（字幕+固定模板），可复制结果
- E-005 无权限窗口：提示以管理员运行或使用粘贴兜底

### 3.5 隐私与安全
- S-001 本地模式：抓包验证零外发
- S-002 API Key 加密存储；日志无明文密钥
- S-003 问题报告导出自动脱敏

## 4. 度量与通过准则
- 通过率 ≥ 95%；P 系列均达标；关键路径 100% 通过
- 缺陷分级：Blocker/High 归零方可发布

## 5. 回归策略
- 每周小版本回归核心 20 条；发布前全量回归
