# 架构说明

## 数据流
麦克风 → (本地)Silero VAD → 音频切片(≤6s)
→ Doubao ASR 流式（中间/最终）
→ 片段缓存器（按 VAD 段聚合）
→ OpenRouter LLM 流式整理
→ 结构化草稿合并器（同段覆盖/跨段追加）
→ 插入控制器（SendInput/UIA/剪贴板 + 原子撤销）
→ 焦点输入框

## 进程与模块
- 托盘/悬浮窗 UI（前台）
- 音频/VAD 线程（低延迟）
- ASR/LLM IO 线程（网络）
- 插入控制器（前台）与撤销快照管理

## 容错
- ASR：超时/断线自动重连，退避与限流
- LLM：429/超时切换备用模型；多次失败 → 固定模板直出
- 写入：策略降级 SendInput → UIA → 剪贴板
